<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title></title>
    <link rel="stylesheet" href="./commons/css/weui.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
</head>
<body ontouchstart="">
<div class="container" id="container">
    <div class="page tabbar js_show">
        <div class="page__bd" style="height: 100%;">
            <div class="weui-tab">
                <div class="weui-cells weui-cells_form " style="margin-top:0em">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label" style="color: #1AAD19;">个人信息</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="hidden" maxlength="10" >
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">测试人</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="text" id="userName" maxlength="10" placeholder="姓名">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">所在单位</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="text" id="company" maxlength="30" placeholder="单位名称">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">性别</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" id="showIOSActionSheet" readonly="readonly" placeholder="请选择">
                            <input class="weui-input" type="hidden" id="sexValue">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">年龄</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="number" id="age" maxlength="3" placeholder="年龄">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">联系方式</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="tel" id="userPhone" maxlength="11" placeholder="手机号">
                        </div>
                    </div>
                    <div style="height:50px;"></div>
                    <div style="height: 200px;width: 340px;font-weight:400;margin-left: 13%;font-size: 15px;color: #C0C0C0;">
                        <p>注：请如实填写您的个人信息，以便我们将</p>
                        <p>测评的结果及时反馈!</p>
                    </div>
                    <a href="javascript:void(0)" class="weui-btn weui-btn_primary" id="goTest">进入测试</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    <div class="weui-mask" id="iosMask" style="display: none"></div>
    <div class="weui-actionsheet" id="iosActionsheet">
        <div class="weui-actionsheet__menu">
            <div class="weui-actionsheet__cell" onclick="setSex('男','1')">男</div>
            <div class="weui-actionsheet__cell" onclick="setSex('女','2')">女</div>
        </div>
        <div class="weui-actionsheet__action">
            <div class="weui-actionsheet__cell" id="iosActionsheetCancel">取消</div>
        </div>
    </div>
</div>
</body>

<script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
<script src="/eap/static/js/weui.min.js"></script>
<script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script src="js/wexin-share.js"></script>
<script>
    $("#goTest").click(function () {
        var userName = $("#userName").val();
        if(userName==null||userName==undefined||userName==''){
            $.toast("姓名不能为空","text");
            return false;
        }
        var sex = $("#sexValue").val();
        if(sex==null||sex==undefined||sex==''){
            $.toast("性别不能为空","text");
            return false;
        }
        var age = $("#age").val();
        if(age==null||age==undefined||age==''){
            $.toast("年龄不能为空","text");
            return false;
        }
        var userPhone = $("#userPhone").val();
        if(userPhone==null||userPhone==undefined||userPhone==''){
            $.toast("手机号不能为空","text");
            return false;
        }

        var myreg = /^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/;
        if (!myreg.test(userPhone)) {
            $.toast("手机号格式不正确","text");
            return false;
        }
        localStorage.sex=$("#sexValue").val();
        localStorage.userName=$("#userName").val();
        localStorage.userPhone=$("#userPhone").val();
        localStorage.age=$("#age").val();
        localStorage.company=$("#company").val();
        location.href = "/eap/static/evaluation_testing.html";
    })

    // $('#sex').click(function(e){
    //     weui.picker([{
    //         label: '男',
    //         value: 1
    //     }, {
    //         label: '女',
    //         value: 2
    //     }], {
    //         onChange: function (result) {
    //         },
    //         onConfirm: function (result) {
    //             if (result[0] == 1){
    //                 $("#sex").val('男');
    //                 $("#sexValue").val(1);
    //             } else{
    //                 $("#sex").val("女");
    //                 $("#sexValue").val(2);
    //             }
    //         }
    //     });
    // });
    $(document).ready(function(){
        console.log(localStorage.code)
        if (localStorage.code == "MBTI"){
            $("title").html("MBTI职业性格测试");
        }else if(localStorage.code == "OQ45"){
            $("title").html("OQ45心理评估量表");
        }else if(localStorage.code == "SCL90"){
            $("title").html("SCL_90症状自评量表");
        }
    })

    function setSex(_key,_value){
        console.log(_key)
        $("#showIOSActionSheet").val(_key)
        $("#sexValue").val(_value)
        $('#iosActionsheetCancel').trigger('click');
    }
    $(function(){
        var $iosActionsheet = $('#iosActionsheet');
        var $iosMask = $('#iosMask');

        function hideActionSheet() {
            $iosActionsheet.removeClass('weui-actionsheet_toggle');
            $iosMask.fadeOut(200);
        }

        $iosMask.on('click', hideActionSheet);
        $('#iosActionsheetCancel').on('click', hideActionSheet);
        $("#showIOSActionSheet").on("click", function(){
            $iosActionsheet.addClass('weui-actionsheet_toggle');
            $iosMask.fadeIn(200);
        });
    });

    // android
    $(function(){
        var $androidActionSheet = $('#androidActionsheet');
        var $androidMask = $androidActionSheet.find('.weui-mask');

        $("#showAndroidActionSheet").on('click', function(){
            $androidActionSheet.fadeIn(200);
            $androidMask.on('click',function () {
                $androidActionSheet.fadeOut(200);
            });
        });
    });
</script>
</html>